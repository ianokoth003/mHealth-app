{"ast":null,"code":"import React,{useState}from\"react\";import api from\"../api/axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(_ref){let{onLogin}=_ref;const[email,setEmail]=useState(\"\");const[password,setPassword]=useState(\"\");const[err,setErr]=useState(\"\");const submit=async e=>{e.preventDefault();try{const r=await api.post(\"/auth/login\",{email,password});const token=r.data.access_token;onLogin(token);api.defaults.headers.common[\"Authorization\"]=\"Bearer \".concat(token);}catch(err){var _err$response,_err$response$data;setErr((err===null||err===void 0?void 0:(_err$response=err.response)===null||_err$response===void 0?void 0:(_err$response$data=_err$response.data)===null||_err$response$data===void 0?void 0:_err$response$data.error)||\"Login failed\");}};return/*#__PURE__*/_jsxs(\"div\",{className:\"center\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"HealthEase \\u2014 Worker Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submit,children:[/*#__PURE__*/_jsx(\"input\",{placeholder:\"email\",value:email,onChange:e=>setEmail(e.target.value)}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"password\",type:\"password\",value:password,onChange:e=>setPassword(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{children:\"Login\"}),err&&/*#__PURE__*/_jsx(\"div\",{className:\"err\",children:err})]})]});}","map":{"version":3,"names":["React","useState","api","jsx","_jsx","jsxs","_jsxs","Login","_ref","onLogin","email","setEmail","password","setPassword","err","setErr","submit","e","preventDefault","r","post","token","data","access_token","defaults","headers","common","concat","_err$response","_err$response$data","response","error","className","children","onSubmit","placeholder","value","onChange","target","type"],"sources":["C:/Users/Administrator/Downloads/mhealth/frontend/mobile-react/src/screens/Login.js"],"sourcesContent":["import React, {useState} from \"react\";\r\nimport api from \"../api/axios\";\r\n\r\nexport default function Login({onLogin}){\r\n  const [email,setEmail]=useState(\"\");\r\n  const [password,setPassword]=useState(\"\");\r\n  const [err,setErr]=useState(\"\");\r\n\r\n  const submit = async (e)=>{\r\n    e.preventDefault();\r\n    try {\r\n      const r = await api.post(\"/auth/login\", { email, password });\r\n      const token = r.data.access_token;\r\n      onLogin(token);\r\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\r\n    } catch (err) {\r\n      setErr(err?.response?.data?.error || \"Login failed\");\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"center\">\r\n      <h2>HealthEase â€” Worker Login</h2>\r\n      <form onSubmit={submit}>\r\n        <input placeholder=\"email\" value={email} onChange={e=>setEmail(e.target.value)} />\r\n        <input placeholder=\"password\" type=\"password\" value={password} onChange={e=>setPassword(e.target.value)} />\r\n        <button>Login</button>\r\n        {err && <div className=\"err\">{err}</div>}\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAGC,QAAQ,KAAO,OAAO,CACrC,MAAO,CAAAC,GAAG,KAAM,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/B,cAAe,SAAS,CAAAC,KAAKA,CAAAC,IAAA,CAAW,IAAV,CAACC,OAAO,CAAC,CAAAD,IAAA,CACrC,KAAM,CAACE,KAAK,CAACC,QAAQ,CAAC,CAACV,QAAQ,CAAC,EAAE,CAAC,CACnC,KAAM,CAACW,QAAQ,CAACC,WAAW,CAAC,CAACZ,QAAQ,CAAC,EAAE,CAAC,CACzC,KAAM,CAACa,GAAG,CAACC,MAAM,CAAC,CAACd,QAAQ,CAAC,EAAE,CAAC,CAE/B,KAAM,CAAAe,MAAM,CAAG,KAAO,CAAAC,CAAC,EAAG,CACxBA,CAAC,CAACC,cAAc,CAAC,CAAC,CAClB,GAAI,CACF,KAAM,CAAAC,CAAC,CAAG,KAAM,CAAAjB,GAAG,CAACkB,IAAI,CAAC,aAAa,CAAE,CAAEV,KAAK,CAAEE,QAAS,CAAC,CAAC,CAC5D,KAAM,CAAAS,KAAK,CAAGF,CAAC,CAACG,IAAI,CAACC,YAAY,CACjCd,OAAO,CAACY,KAAK,CAAC,CACdnB,GAAG,CAACsB,QAAQ,CAACC,OAAO,CAACC,MAAM,CAAC,eAAe,CAAC,WAAAC,MAAA,CAAaN,KAAK,CAAE,CAClE,CAAE,MAAOP,GAAG,CAAE,KAAAc,aAAA,CAAAC,kBAAA,CACZd,MAAM,CAAC,CAAAD,GAAG,SAAHA,GAAG,kBAAAc,aAAA,CAAHd,GAAG,CAAEgB,QAAQ,UAAAF,aAAA,kBAAAC,kBAAA,CAAbD,aAAA,CAAeN,IAAI,UAAAO,kBAAA,iBAAnBA,kBAAA,CAAqBE,KAAK,GAAI,cAAc,CAAC,CACtD,CACF,CAAC,CAED,mBACEzB,KAAA,QAAK0B,SAAS,CAAC,QAAQ,CAAAC,QAAA,eACrB7B,IAAA,OAAA6B,QAAA,CAAI,gCAAyB,CAAI,CAAC,cAClC3B,KAAA,SAAM4B,QAAQ,CAAElB,MAAO,CAAAiB,QAAA,eACrB7B,IAAA,UAAO+B,WAAW,CAAC,OAAO,CAACC,KAAK,CAAE1B,KAAM,CAAC2B,QAAQ,CAAEpB,CAAC,EAAEN,QAAQ,CAACM,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cAClFhC,IAAA,UAAO+B,WAAW,CAAC,UAAU,CAACI,IAAI,CAAC,UAAU,CAACH,KAAK,CAAExB,QAAS,CAACyB,QAAQ,CAAEpB,CAAC,EAAEJ,WAAW,CAACI,CAAC,CAACqB,MAAM,CAACF,KAAK,CAAE,CAAE,CAAC,cAC3GhC,IAAA,WAAA6B,QAAA,CAAQ,OAAK,CAAQ,CAAC,CACrBnB,GAAG,eAAIV,IAAA,QAAK4B,SAAS,CAAC,KAAK,CAAAC,QAAA,CAAEnB,GAAG,CAAM,CAAC,EACpC,CAAC,EACJ,CAAC,CAEV","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}